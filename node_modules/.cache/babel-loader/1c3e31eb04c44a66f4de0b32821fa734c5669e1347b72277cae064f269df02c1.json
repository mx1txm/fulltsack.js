{"ast":null,"code":"import { equal } from '@wry/equality';\nimport { invariant } from 'ts-invariant';\nimport { parser, operationName } from \"../parser/index.js\";\nvar OperationData = function () {\n  function OperationData(options, context) {\n    this.isMounted = false;\n    this.previousOptions = {};\n    this.context = {};\n    this.options = {};\n    this.options = options || {};\n    this.context = context || {};\n  }\n  OperationData.prototype.getOptions = function () {\n    return this.options;\n  };\n  OperationData.prototype.setOptions = function (newOptions, storePrevious) {\n    if (storePrevious === void 0) {\n      storePrevious = false;\n    }\n    if (storePrevious && !equal(this.options, newOptions)) {\n      this.previousOptions = this.options;\n    }\n    this.options = newOptions;\n  };\n  OperationData.prototype.unmount = function () {\n    this.isMounted = false;\n  };\n  OperationData.prototype.refreshClient = function () {\n    var client = this.options && this.options.client || this.context && this.context.client;\n    __DEV__ ? invariant(!!client, 'Could not find \"client\" in the context or passed in as an option. ' + 'Wrap the root component in an <ApolloProvider>, or pass an ' + 'ApolloClient instance in via options.') : invariant(!!client, 29);\n    var isNew = false;\n    if (client !== this.client) {\n      isNew = true;\n      this.client = client;\n      this.cleanup();\n    }\n    return {\n      client: this.client,\n      isNew: isNew\n    };\n  };\n  OperationData.prototype.verifyDocumentType = function (document, type) {\n    var operation = parser(document);\n    var requiredOperationName = operationName(type);\n    var usedOperationName = operationName(operation.type);\n    __DEV__ ? invariant(operation.type === type, \"Running a \" + requiredOperationName + \" requires a graphql \" + (requiredOperationName + \", but a \" + usedOperationName + \" was used instead.\")) : invariant(operation.type === type, 30);\n  };\n  return OperationData;\n}();\nexport { OperationData };","map":{"version":3,"names":["equal","invariant","parser","operationName","OperationData","options","context","isMounted","previousOptions","prototype","getOptions","setOptions","newOptions","storePrevious","unmount","refreshClient","client","__DEV__","isNew","cleanup","verifyDocumentType","document","type","operation","requiredOperationName","usedOperationName"],"sources":["/Users/meltem/PycharmProjects/fullstack-js/node_modules/@apollo/src/react/data/OperationData.ts"],"sourcesContent":["import { DocumentNode } from 'graphql';\nimport { equal } from '@wry/equality';\nimport { invariant } from 'ts-invariant';\n\nimport { ApolloClient } from '../../core';\nimport { DocumentType, parser, operationName } from '../parser';\nimport { CommonOptions } from '../types/types';\n\nexport abstract class OperationData<TOptions = any> {\n  public isMounted: boolean = false;\n  public previousOptions: CommonOptions<TOptions> = {} as CommonOptions<\n    TOptions\n  >;\n  public context: any = {};\n  public client: ApolloClient<object>;\n\n  private options: CommonOptions<TOptions> = {} as CommonOptions<TOptions>;\n\n  constructor(options?: CommonOptions<TOptions>, context?: any) {\n    this.options = options || ({} as CommonOptions<TOptions>);\n    this.context = context || {};\n  }\n\n  public getOptions(): CommonOptions<TOptions> {\n    return this.options;\n  }\n\n  public setOptions(\n    newOptions: CommonOptions<TOptions>,\n    storePrevious: boolean = false\n  ) {\n    if (storePrevious && !equal(this.options, newOptions)) {\n      this.previousOptions = this.options;\n    }\n    this.options = newOptions;\n  }\n\n  public abstract execute(...args: any): any;\n  public abstract afterExecute(...args: any): void | (() => void);\n  public abstract cleanup(): void;\n\n  protected unmount() {\n    this.isMounted = false;\n  }\n\n  protected refreshClient() {\n    const client =\n      (this.options && this.options.client) ||\n      (this.context && this.context.client);\n\n    invariant(\n      !!client,\n      'Could not find \"client\" in the context or passed in as an option. ' +\n        'Wrap the root component in an <ApolloProvider>, or pass an ' +\n        'ApolloClient instance in via options.'\n    );\n\n    let isNew = false;\n    if (client !== this.client) {\n      isNew = true;\n      this.client = client;\n      this.cleanup();\n    }\n    return {\n      client: this.client as ApolloClient<object>,\n      isNew\n    };\n  }\n\n  protected verifyDocumentType(document: DocumentNode, type: DocumentType) {\n    const operation = parser(document);\n    const requiredOperationName = operationName(type);\n    const usedOperationName = operationName(operation.type);\n    invariant(\n      operation.type === type,\n      `Running a ${requiredOperationName} requires a graphql ` +\n        `${requiredOperationName}, but a ${usedOperationName} was used instead.`\n    );\n  }\n}\n"],"mappings":"AACA,SAASA,KAAK,QAAQ,eAAe;AACrC,SAASC,SAAS,QAAQ,cAAc;AAGxC,SAAuBC,MAAM,EAAEC,aAAa,QAAQ,oBAAY;AAGhE,IAAAC,aAAA;EAUE,SAAAA,cAAYC,OAAiC,EAAEC,OAAa;IATrD,KAAAC,SAAS,GAAY,KAAK;IAC1B,KAAAC,eAAe,GAA4B,EAEjD;IACM,KAAAF,OAAO,GAAQ,EAAE;IAGhB,KAAAD,OAAO,GAA4B,EAA6B;IAGtE,IAAI,CAACA,OAAO,GAAGA,OAAO,IAAK,EAA8B;IACzD,IAAI,CAACC,OAAO,GAAGA,OAAO,IAAI,EAAE;EAC9B;EAEOF,aAAA,CAAAK,SAAA,CAAAC,UAAU,GAAjB;IACE,OAAO,IAAI,CAACL,OAAO;EACrB,CAAC;EAEMD,aAAA,CAAAK,SAAA,CAAAE,UAAU,GAAjB,UACEC,UAAmC,EACnCC,aAA8B;IAA9B,IAAAA,aAAA;MAAAA,aAAA,QAA8B;IAAA;IAE9B,IAAIA,aAAa,IAAI,CAACb,KAAK,CAAC,IAAI,CAACK,OAAO,EAAEO,UAAU,CAAC,EAAE;MACrD,IAAI,CAACJ,eAAe,GAAG,IAAI,CAACH,OAAO;;IAErC,IAAI,CAACA,OAAO,GAAGO,UAAU;EAC3B,CAAC;EAMSR,aAAA,CAAAK,SAAA,CAAAK,OAAO,GAAjB;IACE,IAAI,CAACP,SAAS,GAAG,KAAK;EACxB,CAAC;EAESH,aAAA,CAAAK,SAAA,CAAAM,aAAa,GAAvB;IACE,IAAMC,MAAM,GACT,IAAI,CAACX,OAAO,IAAI,IAAI,CAACA,OAAO,CAACW,MAAM,IACnC,IAAI,CAACV,OAAO,IAAI,IAAI,CAACA,OAAO,CAACU,MAAO;IAEvCC,OAAA,GACEhB,SAAQ,CACR,EAAAe,MAAA,sEAAoE,GAClE,6DAA6D,GAC7D,uCAAuC,CAC1C,GAACf,SAAA,GAAAe,MAAA;IAEF,IAAIE,KAAK,GAAG,KAAK;IACjB,IAAIF,MAAM,KAAK,IAAI,CAACA,MAAM,EAAE;MAC1BE,KAAK,GAAG,IAAI;MACZ,IAAI,CAACF,MAAM,GAAGA,MAAM;MACpB,IAAI,CAACG,OAAO,EAAE;;IAEhB,OAAO;MACLH,MAAM,EAAE,IAAI,CAACA,MAA8B;MAC3CE,KAAK,EAAAA;KACN;EACH,CAAC;EAESd,aAAA,CAAAK,SAAA,CAAAW,kBAAkB,GAA5B,UAA6BC,QAAsB,EAAEC,IAAkB;IACrE,IAAMC,SAAS,GAAGrB,MAAM,CAACmB,QAAQ,CAAC;IAClC,IAAMG,qBAAqB,GAAGrB,aAAa,CAACmB,IAAI,CAAC;IACjD,IAAMG,iBAAiB,GAAGtB,aAAa,CAACoB,SAAS,CAACD,IAAI,CAAC;IACvDL,OAAA,GACEhB,SAAS,CAACsB,SAAS,CAAAD,IAAI,KACvBA,IAAA,cAAa,GAAAE,qBAAqB,yBAAsB,IACnDA,qBAAqB,gBAAWC,iBAAiB,uBAAoB,EAC3E,GAACxB,SAAA,CAAAsB,SAAA,CAAAD,IAAA,KAAAA,IAAA;EACJ,CAAC;EACH,OAAAlB,aAAC;AAAD,CAAC,EAvED"},"metadata":{},"sourceType":"module","externalDependencies":[]}